<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Control LED Firebase</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            margin: 10px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        .on {
            background-color: green;
            color: white;
        }

        .off {
            background-color: red;
            color: white;
        }
    </style>
</head>

<body>
    <h1>Control del LED con Firebase</h1>
    <p>Estado actual: <span id="estado">Desconocido</span></p>
    <button id="btnOn" class="on">Encender</button>
    <button id="btnOff" class="off">Apagar</button>

    <!-- SDK Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
        const firebaseConfig = {
            apiKey: "AIzaSyCiKBZgL7G5I26sYy4-T0gibOmFLIDm9iI",
            authDomain: "esp32-79009.firebaseapp.com",
            databaseURL: "https://esp32-79009-default-rtdb.firebaseio.com",
            projectId: "esp32-79009",
            storageBucket: "esp32-79009.firebasestorage.app",
            messagingSenderId: "216032685920",
            appId: "1:216032685920:web:503a57af3107b3826ef805"
        };
        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const estadoTexto = document.getElementById("estado");
        const btnOn = document.getElementById("btnOn");
        const btnOff = document.getElementById("btnOff");

        // Escuchar cambios en /led
        const ledRef = ref(db, "led");
        onValue(ledRef, (snapshot) => {
            const estado = snapshot.val();
            estadoTexto.textContent = estado ? "ENCENDIDO" : "APAGADO"; 
        }); 

        // Botón ENCENDER
        btnOn.addEventListener("click", () => {
            set(ref(db, "led"), true);
        });

        // Botón APAGAR
        btnOff.addEventListener("click", () => {
            set(ref(db, "led"), false);
        });
    </script>
</body>

</html>



